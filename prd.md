# AI 创意笔记本需求文档 (PRD)

## 1. 产品概述
**产品名称：** AI 创意笔记本 (暂定名)
**愿景：** 创建一个无缝集成的创作空间，让灵感在文本、视觉草图和 AI 辅助创意之间自由流动。
**目标：** 构建一个基于 Web 的应用程序，将富文本编辑器、自由绘图画布和智能 AI 助手结合成单一、连贯的体验。

## 2. 目标受众
- **创意写作者：** 需要在写作的同时绘制场景或角色。
- **学生/研究人员：** 做笔记、标注图表或向 AI 询问澄清。
- **设计师/开发者：** 使用文本规范和视觉模型进行头脑风暴。
- **普通用户：** 任何需要多功能数字笔记本的人。

## 3. 核心功能与需求

### 3.1. 文本编辑器 (Writer)
- **富文本支持：** 基本格式（粗体、斜体、下划线、列表、标题）。
- **Markdown 支持：** (可选但推荐) 支持 Markdown 语法以提高效率。
- **结构：** 基于块的编辑器或标准可编辑区域。
- **持久化：** 自动保存功能（本地存储 LocalStorage 或文件系统）。

### 3.2. 绘图画布 (Artist)
- **工具：** 钢笔、铅笔、橡皮擦、荧光笔。
- **自定义：** 颜色选择器、线条粗细调整。
- **集成：** 画布应可嵌入文本中或作为平行层/分屏存在。
  - *MVP 决策：* 分屏或插入在文本段落之间的“画布块”。
- **导出：** 将草图保存为图像的能力。

### 3.3. AI 助手 (Muse)
- **界面：** 聊天侧边栏或悬浮模态框。
- **上下文感知：** AI 应能“读取”当前的文本笔记，提供相关建议（续写、总结、评论）。
- **生成能力：**
  - *文本生成：* “扩展这个想法...”
  - *图像生成 (未来/可选)：* “根据这个描述生成一张图片...”
- **交互：** 用户可以将 AI 回复（文本）拖入主编辑器。

### 3.4. 用户界面 (UI/UX)
- **设计系统：** 现代、简洁、极简主义风格。支持深色/浅色模式。
- **布局与字体：**
  - **左/右侧边栏：** 文件导航栏字体应较大，便于快速浏览和点击。
  - **主区域：** 编辑器和画布。正文字体相对较小/紧凑，以展示更多内容。
  - **AI 面板：** 可折叠的助手侧边栏。

## 4. 用户故事
1.  **故事：** 作为一名作家，我想写一个故事，并快速在文本旁边绘制位置地图，以便我可视化场景。
2.  **故事：** 作为一名学生，我想粘贴一段讲义，并让 AI 将关键点总结为项目符号列表。
3.  **故事：** 作为一名设计师，我想画一个粗略的线框图，并让 AI 根据我对图画的描述建议改进或代码片段。

## 5. 技术架构 (建议)
- **前端框架：** React 或 Next.js (组件化架构)。
- **状态管理：** Zustand 或 Redux (处理复杂状态，如画布数据 + 文本)。
- **文本编辑器引擎：** Tiptap (推荐用于 React), Slate.js, 或 Draft.js。
- **画布引擎：** HTML5 Canvas API 或库如 Fabric.js / Konva / Excalidraw (Excalidraw 适合“草图”感觉)。
- **AI 集成：** OpenAI API / Anthropic API / Google Gemini API 集成。
  - *注意：* 需要安全地处理 API 密钥（客户端输入或后端代理）。
- **存储：** LocalStorage / IndexedDB 用于离线能力。

## 6. 开发里程碑
- **第一阶段：MVP 核心：** 基本文本编辑器 + 基本画布（独立）。
- **第二阶段：集成：** 将画布嵌入文本或分屏视图 + 数据持久化。
- **第三阶段：AI 集成：** 连接 LLM API + 上下文传递。
- **第四阶段：完善：** UI 优化、主题、导出选项。

## 7. 待确认细节 (Open Questions)
- **绘图集成方式：** 图画是作为独立文件管理，还是直接嵌入文本笔记的段落之间？
- **数据存储：** 第一版是否只需要本地存储 (Local Storage)，还是需要云同步 (后端/数据库)？
- **AI 模型偏好：** 默认使用哪家 AI 模型 (OpenAI, Gemini, Anthropic)？是否需要支持用户自定义 API Key？
- **偏向于手绘风格 (Excalidraw) 还是专业绘图 (Fabric.js)？**

## 8. 移动端策略 (Mobile Strategy)
本项目目前的架构基于 Web (React/Next.js)，支持通过以下方式扩展到移动端 (Android/iOS)：

1.  **PWA (Progressive Web App):**
    -   **成本:** 最低。无需额外开发，只需配置 manifest 和 service worker。
    -   **体验:** 用户可以通过浏览器“添加到主屏幕”，体验接近原生应用。
    -   **优点:** 开发速度快，跨平台。
    -   **缺点:** 无法访问部分原生设备功能，性能略低于原生。

2.  **Hybrid App (Capacitor / Cordova):**
    -   **成本:** 中等。使用现有 Web 代码打包成 APK/IPA。
    -   **体验:** 可发布到 Google Play / App Store。
    -   **优点:** 代码复用率 100%，可调用原生插件 (相机、文件系统等)。
    -   **缺点:** 性能受 WebView 限制，手绘延迟可能比原生高。

3.  **React Native (独立开发):**
    -   **成本:** 高。需要维护两套代码 (Web + App) 或使用 Expo/React Native Web 进行单仓库管理。
    -   **体验:** 原生级性能，最佳的手绘体验。
    -   **建议:** 如果对绘图延迟极其敏感，建议后期引入；如果前期验证需求，建议先采用 PWA/Capacitor 方案。
